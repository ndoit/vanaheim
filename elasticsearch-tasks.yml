---
- name: Download and unarchive elasticsearch file
  unarchive:
    dest: /usr/local/share/.
    remote_src: true
    src: https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-{{elastic-version}}.tar.gz
- name: Set initial JVM heap size for Elasticsearch
  lineinfile:
    dest: /usr/local/share/elasticsearch-{{elastic-version}}/config/jvm.options
    state: present
    regexp: ^-Xms2g
    line: -Xms{{elastic-jvm-size}}
- name: Set maximum JVM heap size for Elasticsearch
  lineinfile:
    dest: /usr/local/share/elasticsearch-{{elastic-version}}/config/jvm.options
    state: present
    regexp: ^-Xmx2g
    line: -Xmx{{elastic-jvm-size}}
- vars:
  elastic-version: 5.6.3
  elastic-jvm-size: 500m
