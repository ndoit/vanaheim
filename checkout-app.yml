---
- name: install free-tds requirement for sequel gem
  yum:
    name: freetds
    state: latest
- name: install free-tds-devel requirement for sequel gem
  yum:
    name: freetds-devel
    state: latest

- name: create directory to house application
  file:
    path: /apps/{{app_name}}
    state: directory
- name: checkout application "{{app_name}}"
  git:
    repo: https://github.com/ndoit/{{app_name}}.git
    dest: /apps/{{app_name}}
    force: "yes"
    accept_hostkey: true
- name: bundle install
  bundler:
    state: present
    chdir: /apps/{{app_name}}
    executable: /usr/local/bin/bundler
